#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass article
\begin_preamble
% -----------------------------------------------
% Template for FMA2016
% (based on ISMIR 2010 Template)
% -----------------------------------------------
%
% To compile run:
% pdflatex fma2016template.tex
% bibtex fma2016template
% pdflatex fma2016template.tex (probably twice)
%
% requires the newapa Bibtex style

\usepackage{fma2016}


% Title.
% ------
\title{Automatic Alignment of Long Syllables in A Cappella Beijing Opera}

% Single address
% To use with only one author or several with the _same address_
% ---------------
%\oneauthor
% {Author}
% {Affiliation \\ {\tt {author}@fma.edu}}
%
\oneauthor
 {Georgi Dzhambazov, Yile Yang, Rafael Caro Repetto, Xavier Serra}
 {Music Technology Group, Universitat Pompeu Fabra, Barcelona, Spain \\ {\tt \{georgi.dzhambazov, yile.yang, rafael.caro, xavier.serra\}@upf.edu}}
%
% Two addresses
% --------------
%\twoauthors
%  {First author, Second Author} {Affiliation1 \\ {\tt author1@fma.edu, author2@afm.edu}}
%  {Third author} {Affiliation2 \\ {\tt author3@fma.edu}}
%
% Three addresses
% --------------
%\threeauthors
%  {First author} {Affiliation1 \\ {\tt author1@fma.edu}}
%  {Second author} {Affiliation2 \\ {\tt author2@fma.edu}}
%  {Third author} {Affiliation3 \\ {\tt author3@fma.edu}}
\end_preamble
\use_default_options false
\maintain_unincluded_children false
\language english
\language_package none
\inputencoding auto
\fontencoding default
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 2
\use_package amssymb 0
\use_package cancel 0
\use_package esint 1
\use_package mathdots 0
\use_package mathtools 0
\use_package mhchem 0
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine natbib
\cite_engine_type authoryear
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
maketitle
\end_layout

\end_inset

 
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
\begin_inset Note Comment
status open

\begin_layout Plain Layout

\color black
LONG: Lyrics are one of the most important aspects of vocal music.
 When a performance is heard, most listeners will fol- low the lyrics of
 the main vocal melody.
 
\end_layout

\end_inset

 
\color black
The task of lyrics synchronisation (a.k.a.
 lyrics-to-audio alignment) has as an aim to find in an automatic way a
 match between two musical respresentations of a composition: the singing
 voice and the corresponding lyrics.
 Tracking lyrics may be used to automatically outline the structure of an
 audio recording (inferred from lyric), which can be beneficial for musicologist
s or singing students.

\color inherit
 
\end_layout

\begin_layout Standard

\color black
The problem of lyrics-to-audio alignment has inherent relation to text-to-speech
 alignment.
 
\color inherit
Text-to-speech alignment has been a research field for more than 20 years
 and thus yielded established successful ways for modeling phonemes.
 However, Compared to speech, singing voice has some substantially different
 characteristics: harmonics, pitch range, pronunciation, vibrato, etc.
 In particular, unlike speech, for singing voice, durations of vocals have
 on average somewhat higher variation 
\begin_inset CommandInset citation
LatexCommand citep
key "kruspekeyword"

\end_inset

.
 This suggests that applying an approach from speech recognition out of
 the box might not lead to satisfactory results.
 Traditional music poses an additional challenge: as a way to express an
 emphasis, singers might prolong particular syllables to a duration substantiall
y longer compared to other syllables.
 
\end_layout

\begin_layout Standard
Further, a confinement of current work on modeling lyrics is imposed by
 the necessity of a large speech corpus, on which phoneme models are typically
 trained 
\begin_inset CommandInset citation
LatexCommand citep
key "fujihara2012lyrics,Mesaros96automaticalignment"

\end_inset

.
 Such corpora might not be present for every language or not freely available.
 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
 LONG: This is necessary because of the lack of a big enough annotated training
 singing voice corpus.
 However this is rather cumbersome process and requires a language-specific
 speech corpus.
 Furthermore 
\end_layout

\end_inset

Recent work has shown that training on singing voice instead might be a
 viable alternative 
\begin_inset CommandInset citation
LatexCommand citep
key "hansen2012recognition"

\end_inset

.
\end_layout

\begin_layout Standard
In this study 
\color black
we propose how to automatically align singing voice to lyrics by a probabilistic
 approach, which models explicitly phoneme durations.
 Phoneme models are trained directly on annotated singing voice.
 
\color inherit
We show that incorporating some prior expectation of syllable durations,
 based on musical principles, brings improvement over a baseline method.
 The approach is tested on material from Jingju opera (also known as Beijing
 or Peking opera), which is characterized by its particularly long syllable
 durations.
 
\end_layout

\begin_layout Section
Background on Jingju opera music principles
\end_layout

\begin_layout Standard
Lyrics in Jingju opera come from poetry and are thus commonly structured
 into couplets: each couplet has two lyrics lines.
 A line is usually divided into 3 syllable groups: a group is called 
\emph on
dou
\emph default
 and consists of 2 to 4 written characters 
\begin_inset CommandInset citation
LatexCommand citep
after "Chapter III"
key "wichmann1991listening"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
We use the
\emph on
 
\emph default
term
\emph on
 syllable 
\emph default
as equivalent to one written character.
 
\end_layout

\end_inset

.
 To emphasize the semantics of a phrase or according to the plot, an actor
 has the option to sustain the vocal of the douâ€™s final syllable.
 In this work we will refer to the final syllable of a 
\emph on
dou 
\emph default
as 
\emph on
key syllable.
\end_layout

\begin_layout Standard
Each aria can have one or more metrical pattern (
\emph on
banshi
\emph default
): it indicates the mood of singing and is correlated to tempo
\begin_inset CommandInset citation
LatexCommand citep
key "wichmann1991listening"

\end_inset

.

\color red
 
\color black
Usually an aria starts with a slow 
\emph on
banshi
\emph default
 which gradually changes a couple of times to a faster one, to express more
 intense mood.

\color red
 
\end_layout

\begin_layout Section
Related work
\end_layout

\begin_layout Standard

\color black
Current Lyrics-to-audio alignment is mostly
\color inherit
 based on an speech-adopted approach: phonetic recognizer that models phonemes
 with hidden Markov models (HMMs) 
\begin_inset CommandInset citation
LatexCommand citep
key "fujihara2012lyrics,Mesaros96automaticalignment"

\end_inset

.
 
\color red
Describe Fujihara.
 
\color inherit
HMMs have been originally developed to model speech phonemes for applications
 like text-to-speech alignment.
 HMMs have the drawback that in general they are not capable to represent
 well vowels with long and highly-variable durations, because the waiting
 time in a state in traditional HMMs cannot be unlimitedly long 
\begin_inset CommandInset citation
LatexCommand citet
key "rabiner1989tutorial"

\end_inset

.
 Duration can be modeled by 
\color black
a duration-explicit hidden Markov model
\color inherit
 (a.k.a.
 hidden semi-Markov models).
 In DHMMs the underlying process is allowed to be a semi-Markov chain with
 variable duration of each state 
\begin_inset CommandInset citation
LatexCommand cite
key "yu2010hidden"

\end_inset

.
 DHMMs have been shown to be successful for modeling chord durations in
 automatic chord recognition 
\begin_inset CommandInset citation
LatexCommand citet
key "chen2012chord"

\end_inset

.
 
\color red
HERE Kruspe durations.
\color inherit

\begin_inset Note Comment
status open

\begin_layout Plain Layout

\color black
LONG RELATED WORK: 
\end_layout

\begin_layout Plain Layout
Very few works have trained models directly from singing voice: 
\color red
YILE: Anna Kruspe, Hansen, maybe lyrically
\end_layout

\begin_layout Plain Layout
Not a lot of work on non-western or traditional music: 
\color black
With a few exceptions 
\begin_inset CommandInset citation
LatexCommand citep
key "wong2007automatic"

\end_inset

, to-date computational research on lyrics-to-audio alignment has been focused
 mainly on western popular music
\color inherit
 
\begin_inset CommandInset citation
LatexCommand citep
key "fujihara2012lyrics"

\end_inset

.
 
\end_layout

\end_inset


\end_layout

\begin_layout Section
Approach overview
\end_layout

\begin_layout Standard

\color black
To model phoneme durations, we rely on a DHMM
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\color black
For brevity in the rest of the paper the proposed alignment scheme will
 be referred to as DHMM.

\color inherit
 
\end_layout

\end_inset

.

\color inherit
 A general overview of the proposed approach is presented in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "approach overview"

\end_inset

.
 First an audio recording is manually divided into sentences as indicated
 in the lyrics script of the aria, whereby instrumental-only sections are
 discarded.
 All further steps are performed on each audio segment.
 If we had used automatic segmentation instead, potential erroneous lyrics
 and features could have biased the comparison of a baseline system and
 DHMM.
 As we focus on evaluating the effect of DHMM, manual segmentation is preferred.
 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
Lyrics are read from TextGrid annotation layer 'lines' IMPL: lyricsParser.divideI
ntoSectionsFromAnno
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Then each lyrics sentence is expanded to a sequence of phoneme models
\color black
.

\color inherit
 Each phoneme model yields an observation probability for singing audio,
 based on its Mel Frequency Cepstral Coefficients (MFCC), whereby reference
 syllable durations guide the alignment process.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename systemOverview.svg
	width 110col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Approach Overview
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "approach overview"

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
placement !t
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename praat_annotation_sentence_refDurs.eps
	width 84page%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
An example of 10-syllable sentence, being last in a 
\emph on
banshi
\emph default
 (before the 
\emph on
banshi
\emph default
 changes).
 Actual syllable durations are in pinyin, whereas reference durations are
 in orange parallelograms (below).
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "example"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Section
Vocal/nonvocal segmentation
\end_layout

\begin_layout Plain Layout
tested on dan-xipi-01, resulted in worse accuracy.
 
\end_layout

\begin_layout Plain Layout
TODO: test on all with and without vocal
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Rule-based duration modeling
\end_layout

\begin_layout Standard
The idea of the DHMM is that the actual duration of a phoneme can be seen
 as being generated by a statistical distribution with mean centered at
 an expected reference duration.
 The reference durations can be assigned using any prior knowledge as, for
 example, structure of lyrics segments 
\begin_inset CommandInset citation
LatexCommand citep
key "wang2004lyrically"

\end_inset

.
 In this work they are derived as follows: 
\end_layout

\begin_layout Standard
Firstly,
\emph on
 
\emph default
each 
\emph on
key syllable 
\emph default
in
\emph on
 
\emph default
a 
\emph on
dou
\emph default
 is assigned longer reference duration, while the rest get equal durations.
\begin_inset Note Comment
status collapsed

\begin_layout Plain Layout
IMPL: in SentenceJingju.SentenceJingju.assignReferenceDurations()
\end_layout

\end_inset

 Additionally, we observed in the dataset that usually the last 
\emph on
key syllable
\emph default
 of the last sentence in a 
\emph on
banshi
\emph default
 is prolonged additionally.
 Thus we lenghtened additionally the reference syllable duration of these
 last 
\emph on
key syllables.
 
\emph default
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "example"

\end_inset

 depicts an example.
 According to 
\emph on
dou
\emph default
 groups the 3rd, 6th and last syllable are expected to be prolonged.
 Note that this expectation does not hold for the 3rd syllable.
\end_layout

\begin_layout Standard
Then, to form a sequence of phoneme reference durations 
\begin_inset Formula $R_{i}$
\end_inset

, the reference durations of syllables are divided among their constituent
 phonemes, according to the initial-middle-final division of syllables in
 Mandarin 
\begin_inset CommandInset citation
LatexCommand citep
key "duanmu2000phonology"

\end_inset

.
 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
LONG: Another complication are the dphtongs and triphtong syllables in the
 language.
\end_layout

\end_inset

 
\color red

\begin_inset Note Note
status open

\begin_layout Plain Layout

\color red
TODO:
\color inherit
 describe how it works...
\end_layout

\end_inset


\color inherit
 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
IMPL: jingju.SyllableJingju.SyllableJingju.calcPhonemeDurations
\end_layout

\end_inset


\color black
The reference durations are linearly scaled to a reference number of frames
 according to automatically detected tempo.
 
\end_layout

\begin_layout Subsection
DHMM alignment
\begin_inset CommandInset label
LatexCommand label
name "sub:DHMM"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Comment
status open

\begin_layout Plain Layout
IMPL: SyllableJingju.SyllableJingju.calcPhonemeDurations
\end_layout

\begin_layout Plain Layout
sp at end of syllables are not optional.
 They are assigned duration as a consonant A, which might result in actual
 duration from 0 to A 
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\color black
We have adopted the idea of 
\begin_inset CommandInset citation
LatexCommand citet
key "chen2012chord"

\end_inset

 not to represent durations by explicitly additional counter states, but
 instead to modify the Viterbi forced alignment stage: 
\begin_inset Note Comment
status open

\begin_layout Plain Layout

\color black
LONG: Thus our model reduces to a standard hidden Markov model (HMM).
 In what follows we describe how in the Viterbi decoding stage we maximizes
 over durations.
\end_layout

\end_inset

The duration of a phoneme is modeled as a normal distribution, centered
 at 
\begin_inset Formula $R_{i}$
\end_inset

.
 More details can be found in 
\begin_inset CommandInset citation
LatexCommand citet
key "Dzhambazov"

\end_inset

.We opted for a global standard deviation 
\begin_inset Formula $d_{c}$
\end_inset

 for consonants and 
\begin_inset Formula $d_{v}$
\end_inset

 for vowels.
 Proper values for 
\begin_inset Formula $d_{c}$
\end_inset

 and 
\begin_inset Formula $d_{v}$
\end_inset

 assure that a phoneme sung longer or shorter than the expected 
\begin_inset Formula $R_{i}$
\end_inset

 can be adequately handled.
 
\end_layout

\begin_layout Subsection
Phoneme models
\end_layout

\begin_layout Standard
The first 13 
\color black
MFCCs
\color inherit
 and their âˆ† and âˆ†âˆ† are extracted from 25ms audio frames with the hop size
 of 10ms from the a cappella singing.
 The extracted features are then fed to fit a GMM with 40 components for
 each phoneme
\end_layout

\begin_layout Subsubsection
Dataset
\end_layout

\begin_layout Standard
The dataset consists of excerpts from 15 arias with a cappella female voice
 of total duration of 67 minutes.
 The a cappella singing is generated by subtracting the instrumental accompanime
nt from the original mix
\begin_inset Foot
status open

\begin_layout Plain Layout
The resulting monophonic singing is perceived as clean as if it were a cappella,
 having slightly audible artefacts from percussion on the non-vocal regions
\end_layout

\end_inset

.
 Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "dataset"

\end_inset

 presents the average values per sentence and syllable.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features rotate="0" booktabs="true" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="0pt">
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
#sentences per aria
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
#syllables per sentence
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10.7
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sentence duration
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
18.3 sec
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
syllable duration
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Sentence and syllable averages about the dataset
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "dataset"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Each aria is annotated on the phoneme level by native Chinese speakers and
 a Jingju opera musicologist.
 The phoneme set has 29 phonemes and is derived from Chinese Pinyin, and
 represented using the X-Sampa standard
\begin_inset Foot
status open

\begin_layout Plain Layout
Annotations are made available at http://compmusic.upf.edu/node/286
\end_layout

\end_inset

.
 To assure enough training data for each model, certain phonemes are grouped
 into phonetic classes, based on their perceptual similarity.
\end_layout

\begin_layout Section
Experiments
\end_layout

\begin_layout Standard
Alignment is evaluated in terms of alignment accuracy as the percentage
 of duration of correctly aligned regions from total audio duration (see
 
\begin_inset CommandInset citation
LatexCommand cite
after "figure 9"
key "fujihara2011lyricsynchronizer"

\end_inset

 for an example).
 In the context of this work a value of 100 means perfect matching of all
 Mandarin syllable boundaries from evaluated audio
\begin_inset Foot
status open

\begin_layout Plain Layout
To encourage reproducibility of this research an efficient open-source implement
ation together with documentation is available at https://github.com/georgid/Alig
nmentDuration/tree/noteOnsets/jingju
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsection
Experiment 1: oracle durations
\end_layout

\begin_layout Standard
To define a glass ceiling accuracy, alignment was performed considering
 phoneme annotations as an oracle for acoustic features.
 Looking at phoneme annotations, we set the probability of a phoneme to
 1 during its time interval and 0 otherwise.
 We found that the median accuracy per a sentence of lyrics is close to
 100%, which means that the model is generally capable of handling the highly-va
rying vocal durations of Jingju singing.
 Most optimal results were obtained with 
\begin_inset Formula $d_{c}$
\end_inset

 = 0.7; 
\begin_inset Formula $d_{v}$
\end_inset

 = 3.0 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
done by setting parameter withOracle in doitOneChunkAlign.doitOneChunkAlign
\end_layout

\begin_layout Plain Layout
For each state for a phoneme, for the frames of its duration assign 1 in
 B_map.
 So B_map is zero for all other phonemes.
 
\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
2.0 is much better than 0.1.
 2.0 is comparable to 1.0.
 vowel gets longer deviationInSec.
 Try first reading syllable durs from textGrid and )
\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
weighting factor alpha = 0.97
\end_layout

\end_inset

 
\begin_inset Note Comment
status open

\begin_layout Plain Layout
if phoneme is not present in model, approximate by copying the model for
 a closely sounding phoneme.
\end_layout

\begin_layout Plain Layout
\begin_inset Quotes eld
\end_inset

missing
\begin_inset Quotes erd
\end_inset

 -> 
\begin_inset Quotes eld
\end_inset

replace by
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Plain Layout
U^ -> copy u
\end_layout

\begin_layout Plain Layout
@ -> copy e
\end_layout

\begin_layout Plain Layout
9 -> copy O
\end_layout

\begin_layout Plain Layout
----
\end_layout

\begin_layout Plain Layout
for these since capital letters are used, they dont make difference when
 loading .pkl files.
\end_layout

\begin_layout Plain Layout
N -> copy n
\end_layout

\begin_layout Plain Layout
A -> copy a
\end_layout

\begin_layout Plain Layout
o -> copy O
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Experiment 2: comparison with baseline
\end_layout

\begin_layout Standard
As a baseline we employed a standard HMM with Viterbi decoding with the
 
\emph on
htk
\emph default
 toolkit 
\begin_inset CommandInset citation
LatexCommand citet
key "young1993htk"

\end_inset

.
 For both HMM and DHMM, to assure good generalization of results, evaluation
 is done by cross validation on 3 folds with approximately equal number
 of syllables:
\color green
 
\color black
Phoneme models are trained on 10 of the arias using the phoneme-level annotation
s and evaluated on a 5-aria hold-out subset
\color inherit
.
\begin_inset Note Note
status open

\begin_layout Subsection
Experiment 3: score reference durations
\end_layout

\begin_layout Plain Layout
TODO
\end_layout

\end_inset

Table 1 shows that the proposed duration model outperforms the baseline
 alignment.
 
\end_layout

\begin_layout Section
Conclusion
\end_layout

\begin_layout Standard
Looking at oracle, one can conclude that reaching closer to it can be achieved
 in the future by designing features which capture phoneme identities in
 a more robust way.
 Future work - polyphonic material.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
oracle
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
baseline
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DHMM
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
overall
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
94
\begin_inset Note Note
status open

\begin_layout Plain Layout
79
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
56.56
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
68.9
\begin_inset Note Note
status open

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
48.81
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
median per sentence
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
98
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
75.2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
82.3
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Comparison of total oracle, baseline and DHMM alignment.
 Accuracy is reported as accumulate correct duration over accumulate total
 duration over all sentences from a set of arias.
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Note Comment
status open

\begin_layout Plain Layout
IMPL: run with commit: https://github.com/georgid/JingjuAlignment/commit/87e593d2
c32c6a385c69691370f2bb8ee77328cf
\end_layout

\begin_layout Plain Layout
see comments of commit in github
\end_layout

\begin_layout Plain Layout
----
\end_layout

\begin_layout Plain Layout
baseline is with htk.
 So it has silence model and the one hiere does not.
 So include it in paper.
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Note Comment
status open

\begin_layout Plain Layout
LONG: In Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "comparison-one-aria"

\end_inset

 is depicted the model's accuracy for an aria with very long 
\emph on
key syllables
\emph default
, for which the baseline model performs poor, whereas the DHMM aligns decently
 
\begin_inset Foot
status open

\begin_layout Plain Layout
Please find attached a video recording demonstrating the alignment accuracy
\end_layout

\end_inset

.
 One can see the advantage of the proposed model for example for lyrics
 line 5.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename figure_Accuracy_xixiangji_biuntian.png
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Comparison of oracle, baseline and DHMM results on one aria.
 Each point represents one lyrics line, vertical lines represent 
\emph on
banshi
\emph default
 changes 
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "comparison-one-aria"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
TODO: comment more.
 Not implemented dou rules.
 So results are without them, median per lyrics line is not real.
\end_layout

\end_inset


\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
TODO: show picture example of aria where there is difference 
\end_layout

\begin_layout Plain Layout
\begin_inset Note Comment
status open

\begin_layout Plain Layout
code in runWithParams.py.
 results in dir /Users/joro/Documents/Phd/UPF/arias_dev_01_t_70 and /Users/joro/
Documents/Phd/UPF/arias_dev_05_t_70
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="6">
<features rotate="90" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
deviationInSec
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
laosheng-erhuang_04 (14 min)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
laosheng-xipi_02 (4 min)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dan-xipi_01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dan-xipi_02
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
without reading score duration
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
26.37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
25.00
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
45.30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
28.26
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
21.74
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
with reading score durarions
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
32.01 ()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
45.05 ()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
63.77 (60.20)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
18.39
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
38.74
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
43.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
50.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\color blue
21.3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
dan_xipi_01 has best score: seems it s due to female voice, not to tempo.
\end_layout

\begin_layout Plain Layout
\begin_inset VSpace bigskip
\end_inset

----------
\end_layout

\begin_layout Plain Layout
Tempo (not done yet):
\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="5">
<features rotate="90" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
deviationInSec
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
slow
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mid
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
fast
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
without score
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
23.26
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
36.88
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
41.78
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
with score
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
36.22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
46.24
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
51.44
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
41.68
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
45.17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
40.71
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
Slow tempo has a lot of variation, not stable results.
 middle tempo is better
\end_layout

\begin_layout Plain Layout
increasing the deviation brings improvement when tempo is slow, but affects
 results negatively for mid and fast tempo.
 
\end_layout

\end_inset


\end_layout

\begin_layout Subparagraph*
Acknowledgements
\end_layout

\begin_layout Standard
This work is supported by the European Research Council under the European
 Unionâ€™s Seventh Framework Program, as part of the CompMusic project (ERC
 grant agreement 267583) and partly by the AGAUR research grant.
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "/Users/joro/Documents/Phd/UPF/papers/FMA2014_tex_fullPaper/JabRefLyrics2Audio,/Users/joro/Documents/Phd/UPF/papers/FMA2014_tex_fullPaper/JabRef_saerch_by_lyrics,JingjuAlignment"
options "plainnat"

\end_inset


\end_layout

\end_body
\end_document
